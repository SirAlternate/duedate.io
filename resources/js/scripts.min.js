$(function(){if($("body").attr("id")=="dashboard"){var b=$(".add-class-btn");var a=$();if($(".display").children().length==2){show_class_form()}$("body").on("submit",".display .new form.add-class",function(c){c.preventDefault();$.post("resources/library/actions.php",{action:"add",type:"class",data:{name:$(this).find("input[name='class_name']").val(),desc:$(this).find("input[name='class_desc']").val(),color:$(this).find(".colors input:checked").val()}},function(d){if(d==true){location.reload()}})});$("body").on("mouseup",".display .new form.add-class .colors",function(d){var c=$(d.target).attr("for");$(d.target).closest(".new").attr("color",c)});$("body").on("click",".add-class-btn",function(c){show_class_form()});$("body").on("click",".display .new .close-btn",function(c){hide_class_form()});$("body").on("click",".display .class .close-btn",function(d){d.preventDefault();var c=$(d.target).parent().parent().attr("class-id");$.post("resources/library/actions.php",{action:"delete",type:"class",id:c},function(e){if(e==true){$(d.target).parent().parent().remove();if($(".display").children().length==2){show_form()}}return false})});$("body").on("click",".display .class ul li.add-btn",function(d){var c=$(d.target).closest("li");if(c.hasClass("selected")){hide_assignment_form(c)}else{show_assignment_form(c);c.parent().delay(100).animate({scrollTop:c.parent().height()},300)}});$("body").on("submit",".display .class form.add-assignment",function(c){c.preventDefault();$.post("resources/library/actions.php",{action:"add",type:"assignment",data:{class_id:$(this).parent().parent().attr("class-id"),title:$(this).find("input[name='assg_title']").val(),due_date:$(this).find("input[name='assg_due']").val(),desc:$(this).find("input[name='assg_desc']").val()}},function(d){if(d==true){location.reload()}})});$("body").on("click",'.display .class ul li.item .tab input[type="checkbox"]',function(c){c.preventDefault();if($(c.target).is(":checked")){$.post("resources/library/actions.php",{action:"finish",type:"assignment",id:$(c.target).closest("li").attr("assg-id")},function(d){if(d==true){$(c.target).prop("checked",true)}})}else{$.post("resources/library/actions.php",{action:"unfinish",type:"assignment",id:$(c.target).closest("li").attr("assg-id")},function(d){if(d==true){$(c.target).prop("checked",false)}})}});$("body").on("click",".display .class ul li.item .content",function(d){var c=$(d.target).closest("li");toggle_assignment_options(c)});$("body").on("click",".display .class ul li.item .expand .delete",function(d){var c=$(d.target).closest("li");$.post("resources/library/actions.php",{action:"delete",type:"assignment",id:c.attr("assg-id")},function(e){if(e==true){c.remove()}})});$("body").on("click",".display .class ul li.item .expand .edit",function(d){var c=$(d.target).closest("li")})}});function reset_view(){hide_all_assignment_options();hide_all_assignment_forms();hide_class_form()}function show_class_form(){reset_view();var b=$(".add-class-btn");var a=$("form.add-class");b.attr("hide","true");a.parent().attr("hide","false");b.after(a.parent());a.find('input[name="class_name"]').focus();$(".display").scrollLeft($(".display").width())}function hide_class_form(){var b=$(".add-class-btn");var a=$("form.add-class");a.parent().attr("hide","true");b.attr("hide","false");a.parent().after(b);a.find('input[name="class_name"]').val("");a.find('input[name="class_desc"]').val("");a.parent().removeAttr("color")}function show_assignment_form(a){reset_view();a.addClass("selected");a.find("i").text("expand_less");a.parent().find("form.add-assignment").attr("hide","false")}function hide_assignment_form(a){a.removeClass("selected");a.find("i").text("close");a.parent().find("form.add-assignment").attr("hide","true");a.parent().find('input[name="assg_title"]').val("");a.parent().find('input[name="assg_due"]').val("");a.parent().find('input[name="assg_desc"]').val("")}function hide_all_assignment_forms(){var a=$(".display .class .add-btn.selected");hide_assignment_form(a)}function toggle_assignment_options(c){var a=c.find(".expand");var b=a.attr("hide");if(b=="true"){reset_view();a.attr("hide","false")}else{a.attr("hide","true")}}function hide_all_assignment_options(){var a=$('.display .class ul li.item .expand[hide="false"]');toggle_assignment_options(a.parent())};