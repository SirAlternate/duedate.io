$(function(){if($("body").attr("id")=="dashboard"){var b=$(".add-class-btn");var a=$("form.add-class");if($(".display").children().length==2){show_class_form()}a.on("submit",function(c){c.preventDefault();$.post("resources/library/actions.php",{action:"add",type:"class",data:{name:$(this).find("input[name='class_name']").val(),desc:$(this).find("input[name='class_desc']").val(),color:$(this).find(".colors input:checked").val()}},function(d){if(d==true){location.reload()}})});a.find(".colors").on("mouseup",function(d){var c=$(d.target).attr("for");a.parent().attr("color",c)});$("body").on("click",".add-class-btn",function(c){show_class_form()});$("body").on("click",".display .new .close-btn",function(c){hide_class_form()});$("body").on("click",".display .class .close-btn",function(d){d.preventDefault();var c=$(d.target).parent().parent().attr("class-id");$.post("resources/library/actions.php",{action:"delete",type:"class",id:c},function(e){if(e==true){$(d.target).parent().parent().remove();if($(".display").children().length==2){show_form()}}return false})});$("body").on("click",".display .class ul li.add-btn",function(d){var c=$(d.target).closest("li");if(c.hasClass("selected")){hide_assignment_form(c)}else{close_assignments();hide_assignment_form($("#dashboard .class .add-btn"));show_assignment_form(c)}});$("body").on("click",".display .class ul li.item",function(d){var c=$(d.target).closest("li");if(c.hasClass("selected")){close_assignments()}else{close_assignments();hide_assignment_form(c.parent().find(".add-btn"));c.addClass("selected");c.closest(".class").after('                    <div class="assignment">                    </div>                ')}});$("body").on("submit",".display .assignment form.add-assignment",function(c){c.preventDefault();$.post("resources/library/actions.php",{action:"add",type:"assignment",data:{class_id:$(this).attr("class_id"),title:$(this).find("input[name='assg_title']").val(),due_date:$(this).find("input[name='assg_due']").val(),desc:$(this).find("input[name='assg_desc']").val()}},function(d){console.log(d);if(d==true){location.reload()}})})}});function show_class_form(){var b=$(".add-class-btn");var a=$("form.add-class");b.attr("hide","true");a.parent().attr("hide","false");b.after(a.parent());a.find('input[name="class_name"]').focus();$(".display").scrollLeft($(".display").width())}function hide_class_form(){var b=$(".add-class-btn");var a=$("form.add-class");a.parent().attr("hide","true");b.attr("hide","false");a.parent().after(b);a.find('input[name="class_name"]').val("");a.find('input[name="class_desc"]').val("");a.parent().removeAttr("color")}function close_assignments(){$(".display .class ul li.item.selected").removeClass("selected");$(".display .assignment").remove()}function show_assignment_form(a){a.addClass("selected");a.find("span").text("-");var b=a.parent().parent().attr("class-id");a.after('        <form class="add-assignment" method="post" class_id="'+b+'">            <div class="form-group">                <label for="assg_title">Title:</label></br>                <input type="text" name="assg_title" required="required" />            </div>            <div class="form-group">                <label for="assg_due">Due:</label></br>                <input type="date" name="assg_due" />            </div>            <div class="form-group">                <label for="assg_desc">Description:</label></br>                <input type="text" name="assg_desc" />            </div>            <div class="form-group">                <input type="submit" name="add_assg" value="Create Assignment" />            </div>        </form>    ')}function hide_assignment_form(a){a.parent().find("form.add-assignment").remove();a.removeClass("selected");a.find("span").text("+")};